# language: ko

기능: 예약 생성
  고객이 예약 가능한 사이트를 선택하여 예약하면, 시스템은 예약을 확정하고 예약 번호를 발급한다

  시나리오: 동시 10개 요청 시 1개만 성공
    Given A-1 사이트가 2024-12-25부터 2024-12-27까지 예약 가능한 상태일 때
    When 10명의 사용자가 동시에 같은 기간으로 A-1 사이트 예약을 요청하면
    Then 1개만 성공하고 9개는 실패한다

  시나리오: 예약 성공 시 confirmationCode 발급
    Given A-2 사이트가 2024-12-25부터 2024-12-27까지 예약 가능한 상태일 때
    When 사용자가 A-2 사이트를 예약 요청하면
    Then 예약이 성공하고 6자리 영숫자로 구성된 confirmationCode가 발급된다

  시나리오: 예약 실패 시 에러 메시지
    Given B-1 사이트가 2024-12-25부터 2024-12-27까지 이미 예약된 상태일 때
    When 사용자가 같은 기간으로 B-1 사이트 예약을 요청하면
    Then "해당 기간에 이미 예약이 존재합니다" 에러 메시지를 반환한다

  시나리오: Thread.sleep 제거 후 동시성 제어
    Given Thread.sleep(100)이 제거된 상태이면서 C-3 사이트가 예약 가능한 상태일 때
    When 10명의 사용자가 동시에 C-3 사이트 예약을 요청하면
    Then 여전히 1개만 성공한다

기능: 연박 예약
  고객이 연박 예약을 요청하면, 시스템은 선택한 전체 기간 동안 해당 사이트가 이용 가능한지 확인한다

  시나리오: 중간 날짜 예약 존재 시 실패
    Given D-5 사이트가 2024-12-20부터 2024-12-25까지 예약 가능한 상태이면서 2024-12-22에 이미 예약이 존재할 때
    When 사용자가 2024-12-20부터 2024-12-23까지 3박 4일 예약을 요청하면
    Then 예약이 실패한다

  시나리오: 시작일/종료일 유효성 검증
    Given E-7 사이트가 예약 가능한 상태일 때
    When 사용자가 종료일이 시작일보다 이전인 예약을 요청하면
    Then 예약이 실패한다

  시나리오: 30일 이내 예약 제한
    Given F-8 사이트가 예약 가능한 상태일 때
    When 사용자가 오늘로부터 31일 후 날짜로 예약을 요청하면
    Then "예약은 30일 이내에만 가능합니다" 에러를 반환한다

  시나리오: 일부만 가능해도 전체 실패
    Given G-2 사이트가 2024-12-20, 2024-12-21은 가능하지만 2024-12-22는 예약된 상태일 때
    When 사용자가 2024-12-20부터 2024-12-22까지 예약을 요청하면
    Then 전체 예약이 실패한다

기능: 가용성 확인
  고객이 특정 날짜의 사이트 가용성을 조회하면, 시스템은 실시간으로 정확한 예약 가능 여부를 제공한다

  시나리오: 예약된 사이트는 false 반환
    Given H-3 사이트가 2024-12-25에 이미 예약된 상태일 때
    When 2024-12-25 날짜로 H-3 사이트 가용성을 조회하면
    Then available: false를 반환한다

  시나리오: 예약 가능 사이트는 true 반환
    Given I-4 사이트가 2024-12-25에 예약 가능한 상태일 때
    When 2024-12-25 날짜로 I-4 사이트 가용성을 조회하면
    Then available: true를 반환한다

  시나리오: 예약 생성과 가용성 데이터 일관성
    Given J-6 사이트가 2024-12-25에 예약 가능한 상태일 때
    When 사용자A가 J-6 사이트를 2024-12-25에 예약 성공한 직후 사용자B가 같은 날짜로 가용성을 조회하면
    Then available: false를 반환한다

  시나리오: 동시 조회 시 정확성
    Given K-8 사이트가 2024-12-25에 예약된 상태일 때
    When 10명의 사용자가 동시에 K-8 사이트 가용성을 조회하면
    Then 모든 사용자에게 동일하게 available: false를 반환한다
