# Top 3 인수 조건

## 1. 예약 생성

### 5W1H 분석
- **What**: 새로운 캠핑장 예약을 생성하는 기능
- **Who**: 캠핑장 이용 고객
- **When**: 캠핑장 이용을 원하는 날짜에 예약을 생성할 때
- **Where**: 캠핑장 예약 시스템을 통해 온라인으로
- **Why**: 캠핑장 이용을 보장하고 관리 효율성을 높이기 위해
- **How**: 고객 정보, 예약 기간, 사이트 정보를 입력하여 예약을 생성

**인수 조건**: "고객이 유효한 정보를 입력하면 시스템이 중복 예약을 방지하고 확인 코드와 함께 예약을 생성해야 한다"

**검증 포인트**:
- [ ] 과거 날짜로 예약 생성 시 에러 메시지 반환
- [ ] 오늘로부터 30일 이후 날짜 예약 시 에러 메시지 반환
- [ ] 종료일이 시작일보다 이전인 경우 에러 메시지 반환
- [ ] 필수 정보(고객명, 전화번호, 사이트번호, 날짜) 누락 시 에러 메시지 반환
- [ ] 동일 사이트, 동일 기간에 중복 예약 시 에러 메시지 반환
- [ ] 존재하지 않는 사이트 번호 입력 시 에러 메시지 반환
- [ ] 정상적인 예약 생성 시 201 상태 코드와 예약 정보 반환
- [ ] 예약 상태가 "CONFIRMED"로 설정됨
- [ ] 동시에 여러 예약 요청 시 단 하나만 성공 (동시성 제어)
- [ ] 취소된 예약이 있는 사이트는 재예약 가능
- [ ] 연박 예약이 가능해야한다.

## 2. 예약 수정

### 5W1H 분석
- **What**: 기존 예약 정보를 수정하는 기능
- **Who**: 예약을 생성한 고객
- **When**: 예약 정보 변경이 필요할 때 (날짜, 사이트, 인원 등)
- **Where**: 캠핑장 예약 시스템을 통해 온라인으로
- **Why**: 예약자의 상황 변화나 요구사항 변경에 대응하기 위해
- **How**: 확인 코드를 통한 본인 인증 후 예약 정보를 수정

**인수 조건**: "확인 코드가 일치하는 경우에만 기존 예약 정보를 수정할 수 있어야 하며, 수정 시에도 중복 예약을 방지해야 한다"

**검증 포인트**:
- [ ] 확인 코드가 일치하지 않으면 에러 메시지 반환
- [ ] 존재하지 않는 예약 ID 입력 시 에러 메시지 반환
- [ ] 오늘로부터 30일 이후 날짜로 수정 시 에러 메시지 반환
- [ ] 존재하지 않는 사이트 번호로 수정 시 에러 메시지 반환
- [ ] 정상적인 예약 수정 시 200 상태 코드와 수정된 예약 정보 반환
- [ ] 수정된 예약의 상태가 "CONFIRMED"로 유지됨
- [ ] 부분 수정 시 기존 정보는 그대로 유지됨
- [ ] 동시에 여러 수정 요청 시 단 하나만 성공 (동시성 제어)

## 3. 예약 캘린더 조회

### 5W1H 분석
- **What**: 특정 사이트의 월별 예약 현황을 캘린더 형태로 조회하는 기능
- **Who**: 캠핑장 관리자 및 예약을 고려하는 고객
- **When**: 예약 현황을 파악하고 싶을 때
- **Where**: 캠핑장 예약 시스템을 통해 온라인으로
- **Why**: 예약 가능한 날짜를 시각적으로 확인하고 예약 계획을 세우기 위해
- **How**: 연도, 월, 사이트 ID를 입력하여 해당 사이트의 월별 예약 현황을 조회

**인수 조건**: "유효한 연도, 월, 사이트 ID를 입력하면 해당 사이트의 월별 예약 현황을 일별로 표시하는 캘린더 정보를 반환해야 한다"

**검증 포인트**:
- [ ] 존재하지 않는 사이트 ID 입력 시 에러 메시지 반환
- [ ] 정상적인 캘린더 조회 시 200 상태 코드와 캘린더 정보 반환
- [ ] 각 날짜별로 가용 여부(available)가 정확히 표시됨
- [ ] 요약 정보(summary)가 정확히 계산되어 포함됨
- [ ] 취소된 예약은 가용한 날짜로 표시됨
- [ ] 연박 예약의 경우 시작일부터 종료일까지 모든 날짜가 예약된 것으로 표시됨