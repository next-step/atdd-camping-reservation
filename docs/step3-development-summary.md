# Step3 ë¸Œëœì¹˜ ê°œë°œ ì‘ì—… ìš”ì•½

ì´ ë¬¸ì„œëŠ” Step3 ë¸Œëœì¹˜ì—ì„œ ìˆ˜í–‰ëœ í…ŒìŠ¤íŠ¸ ì½”ë“œ ê°œì„  ì‘ì—…ë“¤ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

## Step3 ë¸Œëœì¹˜ ì£¼ìš” ë³€ê²½ì‚¬í•­

### ğŸ“Š ì „ì²´ ë³€ê²½ í†µê³„
- **ì´ 8ê°œ ì»¤ë°‹** ì§„í–‰
- **ì´ ë³€ê²½ ë¼ì¸**: +694ì¤„, -182ì¤„ 
- **ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼**: 2ê°œ
- **ì£¼ìš” ìˆ˜ì • íŒŒì¼**: 8ê°œ

### ğŸ¯ í•µì‹¬ ê°œì„ ì‚¬í•­

#### 1. ì˜ˆì•½ ì‹œìŠ¤í…œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ê°•í™”
- **ì˜ˆì•½ ë‚ ì§œ ê²€ì¦**: 30ì¼ ì´ˆê³¼ ë° ê³¼ê±° ë‚ ì§œ ì˜ˆì•½ ë°©ì§€
- **ì˜ˆì•½ ìƒíƒœ ê´€ë¦¬**: `ReservationStatus` enum ì¶”ê°€ë¡œ ì·¨ì†Œ í›„ ì¬ì˜ˆì•½ ê°€ëŠ¥
- **ë™ì‹œì„± ì œì–´**: `synchronized` í‚¤ì›Œë“œë¡œ ë™ì‹œ ì˜ˆì•½ ìš”ì²­ ì²˜ë¦¬
- **ê°ì²´ ìƒì„± ê°œì„ **: `Reservation` ìƒì„±ì ì¶”ê°€ë¡œ ì½”ë“œ ê°„ì†Œí™”

#### 2. í¬ê´„ì ì¸ ì…ë ¥ê°’ ê²€ì¦ ì‹œìŠ¤í…œ
- **ì˜ˆì•½ì ì´ë¦„ ê²€ì¦**: null, ë¹ˆê°’, ê³µë°± ì²˜ë¦¬ (3ê°œ í…ŒìŠ¤íŠ¸)
- **ì „í™”ë²ˆí˜¸ ê²€ì¦**: null, ë¹ˆê°’, ê³µë°±, í˜•ì‹(`010-xxxx-xxxx`) ì²˜ë¦¬ (6ê°œ í…ŒìŠ¤íŠ¸)
- **ê³µí†µ ê²€ì¦ ë¡œì§**: `validateRequiredField()` ë©”ì„œë“œë¡œ ì¤‘ë³µ ì œê±°
- **ì—ëŸ¬ ìƒíƒœ ì½”ë“œ í†µì¼**: ëª¨ë“  ê²€ì¦ ì‹¤íŒ¨ë¥¼ 409 Conflictë¡œ í‘œì¤€í™”

#### 3. í…ŒìŠ¤íŠ¸ ì½”ë“œ í’ˆì§ˆ í˜ì‹ 
- **ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ë¦¬íŒ©í„°ë§**: 54ì¤„ â†’ 17ì¤„ë¡œ ë‹¨ìˆœí™”
- **ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ìœ í‹¸ë¦¬í‹°**: `ConcurrencyTestHelper` í´ë˜ìŠ¤ ìƒì„±
- **í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°**: `Supplier`ì™€ `Function` í™œìš©
- **BDD ì‹œë‚˜ë¦¬ì˜¤ í™•ì¥**: 6ê°œ â†’ 12ê°œ ì‹œë‚˜ë¦¬ì˜¤ë¡œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ

### ğŸ“ íŒŒì¼ë³„ ë³€ê²½ì‚¬í•­

#### ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼
- `ConcurrencyTestHelper.java` (65ì¤„) - ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
- `step3-development-summary.md` (124ì¤„) - ê°œë°œ ì‘ì—… ë¬¸ì„œí™”

#### ì£¼ìš” ìˆ˜ì • íŒŒì¼
- **`ReservationAcceptanceTest.java`** (+207ì¤„)
  - 9ê°œ ê²€ì¦ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€
  - ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì½”ë“œ ëŒ€í­ ê°„ì†Œí™”
  
- **`ReservationService.java`** (+42ì¤„)
  - ì „í™”ë²ˆí˜¸ ê²€ì¦ ë¡œì§ êµ¬í˜„
  - ê³µí†µ ê²€ì¦ ë©”ì„œë“œ ì¶”ì¶œ
  - ë™ì‹œì„± ì œì–´ ë° ì˜ˆì•½ ë¡œì§ ê°œì„ 

- **`reservation.feature`** (+72ì¤„)
  - BDD ì‹œë‚˜ë¦¬ì˜¤ 6ê°œ ì¶”ê°€
  - Given-When-Then íŒ¨í„´ ê°œì„ 

- **`Reservation.java`** (+25ì¤„)
  - ìƒì„±ì ë©”ì„œë“œ ì¶”ê°€
  - ì˜ˆì•½ ìƒíƒœ ê´€ë¦¬ ê°œì„ 

- **`ReservationRepository.java`** (+12ì¤„)
  - ë‚ ì§œ ê²€ì¦ ì¿¼ë¦¬ ë¡œì§ ì¶”ê°€
  - ë ˆí¬ì§€í† ë¦¬ ë©”ì„œë“œ ê°œì„ 

#### ê¸°íƒ€ ìˆ˜ì • íŒŒì¼
- `ReservationStatus.java` (+15ì¤„) - ìƒˆë¡œìš´ ì˜ˆì•½ ìƒíƒœ enum
- `ReservationResponse.java` (+3ì¤„) - ì‘ë‹µ DTO ê°œì„ 
- `ReservationAcceptanceStep.java` (+10ì¤„) - í…ŒìŠ¤íŠ¸ ìŠ¤í… ë©”ì„œë“œ ì¶”ê°€

## AI ë¥¼ í™œìš©í•œ ì‘ì—…
### 1. ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì½”ë“œ ë¦¬íŒ©í„°ë§

#### 1.1 ê¸°ì¡´ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ì˜ ë¬¸ì œì 
- ë³µì¡í•˜ê³  ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ì½”ë“œ êµ¬ì¡° (54ì¤„)
- ExecutorService, CountDownLatch ë“± ë³µì¡í•œ ë™ì‹œì„± API ì‚¬ìš©
- ì¬ì‚¬ìš©ì„± ë¶€ì¡±

#### 1.2 ê°œì„  ì‘ì—…
- **`ConcurrencyTestHelper` ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ìƒì„±** (`src/test/java/com/camping/legacy/util/ConcurrencyTestHelper.java`)
  - ì œë„¤ë¦­ì„ í™œìš©í•œ ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬
  - Supplierì™€ Functionì„ ì‚¬ìš©í•œ í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë° ì ‘ê·¼
  - `ConcurrencyTestResult` recordë¡œ ê²°ê³¼ ìº¡ìŠí™”
  
- **ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ë©”ì„œë“œ ë‹¨ìˆœí™”** (54ì¤„ â†’ 17ì¤„)
  - CompletableFutureë§Œ ì‚¬ìš©í•˜ì—¬ ë³µì¡ì„± ê°ì†Œ
  - ëŒë‹¤ í‘œí˜„ì‹ìœ¼ë¡œ ê°„ê²°í•œ ì½”ë“œ ì‘ì„±
  - ë¶ˆí•„ìš”í•œ ë©”ì„œë“œ ì œê±°

#### 1.3 ê²°ê³¼
```java
// ë¦¬íŒ©í„°ë§ ì „ (ë³µì¡í•œ êµ¬ì¡°)
ExecutorService executorService = Executors.newFixedThreadPool(threadCount);
CountDownLatch latch = new CountDownLatch(threadCount);
// ... ë³µì¡í•œ ë™ì‹œì„± ì½”ë“œ

// ë¦¬íŒ©í„°ë§ í›„ (ê°„ë‹¨í•œ êµ¬ì¡°)
ConcurrencyTestResult result = ConcurrencyTestHelper.executeConcurrentTasks(
    () -> createRequest(),
    request -> { ì˜ˆì•½_ìƒì„±_ì„±ê³µ(request); return null; },
    threadCount
);
```

### 2. ì˜ˆì•½ ê²€ì¦ í…ŒìŠ¤íŠ¸ ì¶”ê°€

#### 2.1 ì˜ˆì•½ì ì´ë¦„ ê²€ì¦ í…ŒìŠ¤íŠ¸ (3ê°œ ì¶”ê°€)
- **`createReservationFailWithNullCustomerName`**: ì˜ˆì•½ì ì´ë¦„ì´ nullì¸ ê²½ìš°
- **`createReservationFailWithEmptyCustomerName`**: ì˜ˆì•½ì ì´ë¦„ì´ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°  
- **`createReservationFailWithBlankCustomerName`**: ì˜ˆì•½ì ì´ë¦„ì´ ê³µë°±ë§Œ ìˆëŠ” ê²½ìš°

#### 2.2 ì „í™”ë²ˆí˜¸ ê²€ì¦ í…ŒìŠ¤íŠ¸ (6ê°œ ì¶”ê°€)
**í•„ìˆ˜ê°’ ê²€ì¦:**
- **`createReservationFailWithNullPhoneNumber`**: ì „í™”ë²ˆí˜¸ê°€ nullì¸ ê²½ìš°
- **`createReservationFailWithEmptyPhoneNumber`**: ì „í™”ë²ˆí˜¸ê°€ ë¹ˆ ë¬¸ìì—´ì¸ ê²½ìš°
- **`createReservationFailWithBlankPhoneNumber`**: ì „í™”ë²ˆí˜¸ê°€ ê³µë°±ë§Œ ìˆëŠ” ê²½ìš°

**í˜•ì‹ ê²€ì¦:**
- **`createReservationFailWithInvalidPhoneNumberFormat`**: ì˜ëª»ëœ í˜•ì‹ (010-12-34)
- **`createReservationFailWithNonNumericPhoneNumber`**: ìˆ«ìê°€ ì•„ë‹Œ ë¬¸ì í¬í•¨ (010-abcd-5678)
- **`createReservationFailWithShortPhoneNumber`**: ê¸¸ì´ ë¶€ì¡± (010-1234)

#### 2.3 ìƒíƒœ ì½”ë“œ í†µì¼
- ëª¨ë“  ì‹¤íŒ¨ í…ŒìŠ¤íŠ¸ì˜ HTTP ìƒíƒœ ì½”ë“œë¥¼ 409 Conflictë¡œ í†µì¼

### 3. ì„œë¹„ìŠ¤ ë ˆì´ì–´ ê²€ì¦ ë¡œì§ êµ¬í˜„

#### 3.1 ReservationService ê°œì„ 
**ì „í™”ë²ˆí˜¸ ê²€ì¦ ë¡œì§ ì¶”ê°€:**
```java
private void validateRequiredField(String value, String errorMessage) {
    if (value == null || value.trim().isEmpty()) {
        throw new RuntimeException(errorMessage);
    }
}

private boolean isValidPhoneNumber(String phoneNumber) {
    validateRequiredField(phoneNumber, "ì „í™”ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");
    String pattern = "^010-\\d{4}-\\d{4}$";
    return phoneNumber.matches(pattern);
}
```

#### 3.2 ì½”ë“œ ë¦¬íŒ©í„°ë§
- **ê³µí†µ ê²€ì¦ ë©”ì„œë“œ ì¶”ì¶œ**: ì¤‘ë³µëœ null/ë¹ˆê°’ ê²€ì¦ ë¡œì§ì„ `validateRequiredField`ë¡œ í†µí•©
- **ê°€ë…ì„± í–¥ìƒ**: ì˜ˆì•½ì ì´ë¦„ê³¼ ì „í™”ë²ˆí˜¸ ê²€ì¦ì´ ë™ì¼í•œ ë©”ì„œë“œ ì‚¬ìš©

### 4. BDD í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤ ì—…ë°ì´íŠ¸

#### 4.1 Feature íŒŒì¼ í™•ì¥ (`src/test/resources/features/reservation.feature`)
**ìƒˆë¡œ ì¶”ê°€ëœ ì‹œë‚˜ë¦¬ì˜¤ (6ê°œ):**
- ì „í™”ë²ˆí˜¸ê°€ null/ë¹ˆ ë¬¸ìì—´/ê³µë°±ì¸ ê²½ìš° ì‹¤íŒ¨ (3ê°œ)
- ì „í™”ë²ˆí˜¸ í˜•ì‹ ê²€ì¦ ì‹¤íŒ¨ (3ê°œ)

**ì´ ì‹œë‚˜ë¦¬ì˜¤:** 12ê°œ (ê¸°ì¡´ 6ê°œ + ìƒˆë¡œ ì¶”ê°€ 6ê°œ)

#### 4.2 BDD ìŠ¤íƒ€ì¼ ê°œì„ 
- Given-When-Then íŒ¨í„´ìœ¼ë¡œ ëª…í™•í•œ í…ŒìŠ¤íŠ¸ ì˜ë„ í‘œí˜„
- êµ¬ì²´ì ì¸ ì˜ˆì œ ê°’ì„ í¬í•¨í•œ ì‹œë‚˜ë¦¬ì˜¤ ì‘ì„±
- ì‚¬ìš©ì ê´€ì ì—ì„œ ì´í•´í•˜ê¸° ì‰¬ìš´ ìì—°ì–´ í‘œí˜„

### 5. ì‘ì—… ê²°ê³¼ ìš”ì•½

#### 5.1 í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ í–¥ìƒ
- **ê°œì„  ì „**: ê¸°ë³¸ì ì¸ ì˜ˆì•½ ìƒì„±/ì·¨ì†Œ/ì¤‘ë³µ ê²€ì¦
- **ê°œì„  í›„**: í¬ê´„ì ì¸ ì…ë ¥ê°’ ê²€ì¦ (ì´ë¦„, ì „í™”ë²ˆí˜¸, í˜•ì‹)

#### 5.2 ì½”ë“œ í’ˆì§ˆ ê°œì„ 
- **ì¬ì‚¬ìš©ì„±**: ConcurrencyTestHelperë¡œ ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ì¬ì‚¬ìš© ê°€ëŠ¥
- **ê°€ë…ì„±**: ë³µì¡í•œ ë™ì‹œì„± ì½”ë“œë¥¼ ê°„ê²°í•˜ê²Œ ê°œì„ 
- **ìœ ì§€ë³´ìˆ˜ì„±**: ê³µí†µ ê²€ì¦ ë¡œì§ ì¶”ì¶œë¡œ ì¤‘ë³µ ì œê±°

#### 5.3 ê²€ì¦ ê°•í™”
- **ì˜ˆì•½ì ì´ë¦„**: null, ë¹ˆê°’, ê³µë°± ê²€ì¦
- **ì „í™”ë²ˆí˜¸**: null, ë¹ˆê°’, ê³µë°±, í˜•ì‹(010-xxxx-xxxx) ê²€ì¦
- **ì—ëŸ¬ ë©”ì‹œì§€**: êµ¬ì²´ì ì´ê³  ì‚¬ìš©ì ì¹œí™”ì ì¸ ë©”ì‹œì§€

### 6. íŒŒì¼ë³„ ë³€ê²½ ì‚¬í•­

#### ìƒˆë¡œ ìƒì„±ëœ íŒŒì¼
- `src/test/java/com/camping/legacy/util/ConcurrencyTestHelper.java` - ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°

#### ìˆ˜ì •ëœ íŒŒì¼
- `src/test/java/com/camping/legacy/acceptance/reservation/ReservationAcceptanceTest.java` - ê²€ì¦ í…ŒìŠ¤íŠ¸ 9ê°œ ì¶”ê°€, ë™ì‹œì„± í…ŒìŠ¤íŠ¸ ë¦¬íŒ©í„°ë§
- `src/main/java/com/camping/legacy/service/ReservationService.java` - ì „í™”ë²ˆí˜¸ ê²€ì¦ ë¡œì§ ì¶”ê°€, ê³µí†µ ê²€ì¦ ë©”ì„œë“œ ì¶”ì¶œ
- `src/test/resources/features/reservation.feature` - BDD ì‹œë‚˜ë¦¬ì˜¤ 6ê°œ ì¶”ê°€

#### ê¸°ìˆ ì  ê°œì„ ì‚¬í•­
- **ë™ì‹œì„± í…ŒìŠ¤íŠ¸**: ExecutorService â†’ CompletableFutureë¡œ ë‹¨ìˆœí™”
- **ê²€ì¦ ë¡œì§**: ì¤‘ë³µ ì½”ë“œ ì œê±° ë° ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë©”ì„œë“œ ì¶”ì¶œ
- **í…ŒìŠ¤íŠ¸ êµ¬ì¡°**: Given-When-Then íŒ¨í„´ìœ¼ë¡œ ëª…í™•í•œ ì˜ë„ í‘œí˜„
