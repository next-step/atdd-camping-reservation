# Top 3 인수 조건

## 1. 예약 생성

**인수 조건**: "고객은 필수 정보(이름, 연락처)와 원하는 날짜(최대 30일 이내)를 입력하여, 다른 예약과 겹치지 않는 캠핑장 사이트를 성공적으로 예약하고 고유한 확인 코드를 발급받을 수 있다."

**검증 포인트**:
- [ ] 과거 날짜로는 예약을 생성할 수 없다.
- [ ] 예약 종료일은 시작일보다 이전일 수 없다.
- [ ] 오늘로부터 30일 이후의 날짜로는 예약할 수 없다.
- [ ] 예약자 이름과 전화번호 없이는 예약이 실패한다.
- [ ] 예약이 성공하면 6자리의 영숫자 확인 코드가 생성되어 반환된다.
- [ ] 이미 예약된 날짜와 사이트에 중복 예약을 시도하면 실패(409 Conflict)한다.
- [ ] 취소된 예약(CANCELLED 상태)이 차지하던 날짜에는 새로 예약할 수 있다.

## 2. 동시성 제어

**인수 조건**: "서로 다른 고객이 동일한 캠핑 사이트와 날짜에 대해서 예약 요청을 동시에 하더라도, 시스템은 단 하나의 예약만 성공시키고 나머지는 실패 처리하여 중복 예약을 원천적으로 방지한다."

**검증 포인트**:
- [ ] 동일한 자원에 대한 동시 예약 생성 요청에 대해 오직 하나의 요청만 성공(201 Created)한다.
- [ ] 성공한 요청 외의 모든 동시 요청은 실패(409 Conflict) 응답을 받는다.
- [ ] 동시 요청 이후 데이터베이스에는 단 하나의 예약 레코드만 저장되었는지 확인한다.

## 3. 예약 수정/취소

**인수 조건**: "고객은 예약 조회 시 발급받은 확인 코드를 사용하여 자신의 예약을 안전하게 수정하거나, 환불 정책에 따라 취소할 수 있다."

**검증 포인트**:
- [ ] 예약 ID와 확인 코드가 일치하지 않으면 수정 또는 취소할 수 없다.
- [ ] 당일 예약을 취소할 경우 환불 정책(환불 불가)이 적용되는지 확인한다.
- [ ] 예약일 이전에 취소할 경우 전액 환불 정책이 적용되는지 확인한다.
- [ ] 취소된 예약의 캠핑장 사이트는 다른 사용자가 즉시 예약할 수 있는 상태가 된다.

