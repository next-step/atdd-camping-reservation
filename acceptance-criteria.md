
# Top 3 인수 조건

## 1. 예약 생성
**인수 조건**: "고객이 캠핑 사이트를 예약할 때, 30일 이내 기간 제한, 중복 예약 방지, 동시성 제어가 정상적으로 작동하고 6자리 확인코드가 생성되어야 한다"

**검증 포인트**:
- [ ] 30일 이후 날짜로 예약 시도 시 오류 메시지 반환
- [ ] 과거 날짜로 예약 시도 시 오류 메시지 반환
- [ ] 예약자 이름이 빈 문자열일 때 오류 메시지 반환
- [ ] 전화번호가 null일 때 오류 메시지 반환
- [ ] 동일 사이트, 동일 기간에 중복 예약 시도 시 오류 메시지 반환
- [ ] 동시에 여러 예약 요청 시 단 하나만 성공하고 나머지는 실패
- [ ] 예약 완료 시 6자리 영숫자 확인코드 자동 생성
- [ ] 종료일이 시작일보다 이전일 때 오류 메시지 반환

## 2. 동시성 제어
**인수 조건**: "동시에 여러 사용자가 같은 사이트, 같은 기간에 예약을 시도할 때 단 하나의 예약만 성공하고 나머지는 실패해야 한다"

**검증 포인트**:
- [ ] 동일 사이트에 대한 동시 예약 요청 시 하나만 성공
- [ ] 트랜잭션 격리 수준이 적절히 설정되어 동시성 문제 방지
- [ ] 실패한 예약 요청에 대해 명확한 오류 메시지 제공
- [ ] 취소된 예약(CANCELLED 상태)은 중복 체크에서 제외
- [ ] 데이터 무결성 보장 (부분적 예약 생성 방지)
- [ ] 동시성 테스트 시나리오에서 일관된 결과 보장

## 3. 연박 예약
**인수 조건**: "연박 예약 시 시작일부터 종료일까지 모든 날짜에 대해 예약 가능 여부를 확인하고, 전체 기간이 가용할 때만 예약이 성공해야 한다"

**검증 포인트**:
- [ ] 시작일부터 종료일까지 모든 중간 날짜의 가용성 확인
- [ ] 연박 기간 중 일부 날짜가 예약된 경우 전체 예약 실패
- [ ] 연박 예약 가능한 사이트만 검색 결과에 표시
- [ ] 사이트 검색 시 전체 기간 가용성 기준으로 필터링
- [ ] 연박 예약 시 30일 제한 규칙 적용 (전체 기간이 30일 이내)
- [ ] 연박 예약 취소 시 전체 기간에 대한 취소 처리
