# Top 3 인수 조건


## 1. 예약 생성
**인수 조건**:
> 고객이 유효한 정보로 예약을 요청할 때, 중복되지 않는 기간에 대해 예약이 성공적으로 생성되고 6자리 확인 코드가 발급되어야 한다.

### 5W1H 분석
- **Who**: 캠핑장을 이용하려는 고객
- **What**: 캠핑장 예약 생성
- **When**: 오늘로부터 30일 이내의 날짜
- **Where**: `초록 캠핑장`의 특정 캠핑장
- **Why**: 캠핑장 이용을 위한 사전 예약 필요
- **How**: API를 통한 예약 정보 전송

**검증 포인트**:
- [ ] 예약자 이름이 빈 문자열이 아닌 유효한 값인지 확인
- [ ] 전화번호가 빈 값이 아닌 유효한 값인지 확인
- [ ] 시작일이 오늘을 포함하여 30일 이내인지 확인
- [ ] 종료일이 시작일보다 이후인지 확인
- [ ] 요청한 캠핑장이 존재하는지 확인
- [ ] 요청한 기간에 해당 캠핑장이 예약 가능한지 확인
- [ ] 동시 예약 요청 시 하나만 성공하는지 확인
- [ ] 예약 성공 시 6자리 영숫자 확인 코드가 생성되는지 확인
- [ ] 예약 상태가 `CONFIRMED`로 설정되는지 확인
- [ ] 생성 시간이 자동으로 설정되는지 확인


## 2. 예약 수정
**인수 조건**
> 예약자가 올바른 확인 코드를 제공하여 예약 정보 수정을 요청할 때, 변경된 정보와 확인 코드가 유효하다면 예약이 성공적으로 수정되어야 한다.

### 5W1H 분석
- **Who**: 예약을 한 고객
- **What**: 기존 예약 정보의 수정 (날짜, 사이트, 고객정보 등)
- **When**: 예약 시작일 이전
- **Where**: 기존 또는 새로운 캠핑사이트
- **Why**: 계획 변경, 정보 수정 필요
- **How**: 예약 ID, 확인 코드, 수정할 정보를 통한 업데이트

**검증 포인트**:
- [ ] 예약 ID가 존재하는지 확인
- [ ] 제공된 확인 코드가 예약의 확인 코드와 일치하는지 확인
- [ ] 캠핑장 번호 변경 시 새로운 캠핑장이 존재하는지 확인
- [ ] 날짜 변경 시, 그 기간이 유효한지 확인 (30일 이내로 제한, 종료일 > 시작일)
- [ ] 날짜 변경 시, 그 기간에 캠핑장이 예약 가능한지 확인
- [ ] 부분 업데이트가 정상적으로 동작하는지 확인 (빈 값 처리 유의)
- [ ] 고객명 수정 시 빈 문자열이 아닌지 확인
- [ ] 전화번호 수정 시 빈 값은 아닌지지 확인

- [ ] 수정 후 데이터 일관성이 유지되는지 확인
- [ ] 잘못된 확인 코드 제공 시 적절한 오류 메시지가 반환되는지 확인


## 3. 예약 취소
**인수 조건**
> 예약자가 올바른 확인 코드를 제공하여 예약 취소를 요청할 때, 취소 시점에 따라 적절한 상태로 변경되어야 한다.

### 5W1H 분석
- **Who**: 예약을 한 고객
- **What**: 기존 예약의 취소
- **When**: 예약 시작일 이전 언제든지
- **Where**: 예약된 캠핑장
- **Why**: 계획 변경, 개인 사정 등으로 인한 예약 취소 필요
- **How**: 예약 ID와 확인 코드를 통한 본인 확인 후 취소

**검증 포인트**:
- [ ] 예약 ID가 존재하는지 확인
- [ ] 제공된 확인 코드가 예약의 확인 코드와 일치하는지 확인
- [ ] 당일 취소 시 상태값이 `CANCELED_SAME_DAY`로 변경되는지 확인
- [ ] 사전 취소 시 상태값이 `CANCELED`로 변경되는지 확인
- [ ] 취소된 예약이 중복 예약 검증에서 제외되는지 확인
- [ ] 잘못된 확인 코드 제공 시 적절한 오류 메시지가 반환되는지 확인
- [ ] 존재하지 않는 예약 ID에 대한 적절한 오류 처리가 되는지 확인