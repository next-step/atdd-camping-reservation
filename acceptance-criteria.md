# Top 3 인수 조건 (5W1H)

## 1) 예약 생성
- **인수 조건(한 문장)**  
  고객이 오늘부터 30일 이내의 유효한 기간을 선택하고 필수 정보(이름·전화번호·사이트)를 제출하면, 시스템은 기간 중복이 없을 때 예약을 생성하고 6자리 확인코드를 발급한다.
- **검증 포인트**
    - [ ] `startDate`/`endDate` 필수, `start <= end`
    - [ ] **과거 날짜 불가**, **오늘+30일 초과 불가**
    - [ ] `customerName` 공백 불가, `phoneNumber` null 불가
    - [ ] 동일 사이트·기간 중복 차단(409)
    - [ ] 성공 시 201 + `ReservationResponse(id, confirmationCode, ...)`

## 2) 중복 예약 방지(동시성)
- **인수 조건**  
  동일 사이트·기간에 대해 동시/반복 요청이 와도 **정확히 하나만 성공**하며, 취소(CANCELLED/CANCELLED_SAME_DAY) 상태는 중복 판단에서 제외한다.
- **검증 포인트**
    - [ ] 동등 입력 2회차는 409
    - [ ] N개 동시 요청 → **성공 1 / 실패(N-1)** (409)
    - [ ] 예약 취소 후 동일 기간 재예약 가능(201)
    - [ ] (선택) 저장소/DB 측 유니크 제약 또는 락/격리 수준으로 보장

## 3) 기간 가용성(연박)
- **인수 조건**  
  기간 가용성 검색은 **시작일부터 종료일까지 모든 날짜**가 가능한 사이트만 반환하며, 필터(size=대형/소형)를 정확히 적용한다.
- **검증 포인트**
    - [ ] 중간 날짜 중 1일이라도 불가하면 결과에서 제외
    - [ ] size 필터 일관(“A-”=대형/“B-”=소형)
    - [ ] 응답 스키마(사이트번호/최대인원/설명/가용여부) 검증