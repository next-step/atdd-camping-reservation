Feature: 캠핑장 예약 관리
  캠핑장 사이트 예약 생성, 취소 및 검증 기능

  Scenario: 정상적인 예약 생성
    Given 홍길동이 A-1 사이트에 1박 2일 예약을 원한다
    When 예약 생성을 요청한다
    Then 예약이 성공적으로 생성된다
    And 예약 ID가 발급된다
    And 확인 코드가 생성된다

  Scenario: 30일 초과 예약 실패
    Given 홍길동이 31일 후 날짜로 A-1 사이트 예약을 원한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지는 "예약일이 오늘 기준 30일을 초과할 수 없습니다."이다

  Scenario: 과거 날짜 예약 실패
    Given 홍길동이 어제 날짜로 A-1 사이트 예약을 원한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "예약일이 과거일 수 없습니다."가 포함된다

  Scenario: 종료일이 시작일 이전인 예약 실패
    Given 홍길동이 시작일보다 이른 종료일로 A-1 사이트 예약을 원한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지는 "종료일이 시작일보다 이전일 수 없습니다."이다

  Scenario: 예약자 이름이 null인 경우 실패
    Given 예약자 이름이 null인 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "예약자 이름을 입력해주세요."가 포함된다

  Scenario: 예약자 이름이 빈 문자열인 경우 실패
    Given 예약자 이름이 빈 문자열인 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "예약자 이름을 입력해주세요."가 포함된다

  Scenario: 예약자 이름이 공백만 있는 경우 실패
    Given 예약자 이름이 공백만 있는 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "예약자 이름을 입력해주세요."가 포함된다

  Scenario: 전화번호가 null인 경우 실패
    Given 전화번호가 null인 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "전화번호를 입력해주세요."가 포함된다

  Scenario: 전화번호가 빈 문자열인 경우 실패
    Given 전화번호가 빈 문자열인 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "전화번호를 입력해주세요."가 포함된다

  Scenario: 전화번호가 공백만 있는 경우 실패
    Given 전화번호가 공백만 있는 예약 정보가 있다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "전화번호를 입력해주세요."가 포함된다

  Scenario: 전화번호 형식이 잘못된 경우 실패
    Given 홍길동이 잘못된 전화번호 형식 "010-12-34"로 예약을 시도한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "올바른 전화번호 형식이 아닙니다."가 포함된다

  Scenario: 전화번호에 숫자가 아닌 문자가 포함된 경우 실패
    Given 홍길동이 숫자가 아닌 문자를 포함한 전화번호 "010-abcd-5678"로 예약을 시도한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "올바른 전화번호 형식이 아닙니다."가 포함된다

  Scenario: 전화번호 길이가 부족한 경우 실패
    Given 홍길동이 길이가 짧은 전화번호 "010-1234"로 예약을 시도한다
    When 예약 생성을 요청한다
    Then 예약 생성이 실패한다
    And 에러 메시지에 "올바른 전화번호 형식이 아닙니다."가 포함된다

  Scenario: 동일 사이트 동일 날짜 중복 예약 실패
    Given 홍길동이 A-1 사이트에 1박 2일 예약을 성공했다
    When 김철수가 같은 사이트, 같은 날짜에 예약을 시도한다
    Then 예약 생성이 실패한다
    And 에러 메시지는 "해당 기간에 이미 예약이 존재합니다."이다

  Scenario: 예약 취소 성공
    Given 홍길동이 A-1 사이트에 1박 2일 예약을 성공했다
    When 예약 ID와 확인 코드로 예약 취소를 요청한다
    Then 예약이 성공적으로 취소된다
    And 취소 메시지는 "예약이 취소되었습니다."이다

  Scenario: 예약 취소 후 동일 사이트 동일 날짜 예약 성공
    Given 홍길동이 A-1 사이트에 1박 2일 예약을 성공했다
    And 해당 예약을 취소했다
    When 김철수가 같은 사이트, 같은 날짜에 예약을 시도한다
    Then 예약이 성공적으로 생성된다
    And 김철수의 예약 정보가 정확히 저장된다

  Scenario: 동시성 테스트 - 동일 사이트에 여러 예약 시도
    Given 10명의 사용자가 동시에 A-1 사이트에 같은 날짜 예약을 시도한다
    When 동시 예약 요청을 실행한다
    Then 1명만 예약에 성공한다
    And 나머지 9명은 예약에 실패한다
